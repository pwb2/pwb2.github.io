var T=Object.defineProperty;var O=(r,e,t)=>e in r?T(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var u=(r,e,t)=>(O(r,typeof e!="symbol"?e+"":e,t),t),S=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var L=(r,e,t)=>(S(r,e,"read from private field"),t?t.call(r):e.get(r)),k=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},v=(r,e,t,s)=>(S(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);import{r as f,j as A,R as I,a as j}from"./vendor.1ff7ac82.js";const $=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}};$();const p=class{constructor(e,t,s){this.code=e,this.label=t,this.color=s}static fromChar(e){return p.ALL.filter(t=>t.code===e)[0]}};let d=p;u(d,"BLANK",new p("","Blank","bg-gray-300")),u(d,"PRESENT",new p("/","Present","bg-green-600")),u(d,"LATE",new p("L","Late","bg-yellow-600")),u(d,"AUTH_ABSENT",new p("A","Auth. absent","bg-sky-600")),u(d,"UNAUTH_ABSENT",new p("O","Unauth. absent","bg-red-600")),u(d,"NOT_BLANKS",[p.PRESENT,p.LATE,p.AUTH_ABSENT,p.UNAUTH_ABSENT]),u(d,"ALL",[...p.NOT_BLANKS,p.BLANK]);var b;const N=class{constructor(e,t,s,o){k(this,b,void 0);this.first=e,this.last=t,this.profile=s,this.group=o,v(this,b,d.BLANK)}withState(e){const t=new N(this.first,this.last,this.profile,this.group);return v(t,b,e),t}get name(){return`${this.first} ${this.last}`}get state(){return L(this,b)}get key(){return this.name.toLowerCase().replace(/[^a-z]/,"")}};let m=N;b=new WeakMap,u(m,"BY_NAME",(e,t)=>e.key>t.key?1:t.key>e.key?-1:0),u(m,"SERIALISE",e=>({first:e.first,last:e.last,group:e.group,profile:e.profile,state:e.state.code})),u(m,"DESERIALISE",e=>new N(e.first,e.last,e.profile,e.group).withState(d.fromChar(e.state)));async function P(){const r=["Labrador","German Shephard","Poodle","Golden Retriever","Yorkshire Terrier","Dachshund","Beagle","Cocker Spaniel"],e=a=>r[parseInt(a.replaceAll(/[^0-9]/g,""),10)%r.length];return(await(await fetch("/people.json",{mode:"no-cors"})).json()).results.map(a=>new m(a.name.first,a.name.last,a.picture.medium,e(a.picture.medium)))}function G(){const[r,e]=f.exports.useState([]),t=(o,a)=>e(i=>[...i.filter(h=>h.key!=o.key),o.withState(a)]),s=()=>e(o=>o.map(a=>a.withState(d.BLANK)));return f.exports.useEffect(()=>{r.length&&localStorage.setItem("people",JSON.stringify(r.map(m.SERIALISE)))},[r]),f.exports.useEffect(()=>{const o=localStorage.getItem("people");o?e(JSON.parse(o).map(m.DESERIALISE)):P().then(a=>e(a))},[]),[r,t,s]}const l=A.exports.jsx,n=A.exports.jsxs,w=A.exports.Fragment;function R({src:r,alt:e}){const[t,s]=f.exports.useState(!1);return l("div",{className:`transition-all ${t?"w-full h-full fixed flex items-center justify-center top-0 left-0 z-[1] bg-gray-600 bg-opacity-50 backdrop-blur":"h-12 w-12 m-1 mx-2"}`,onClick:()=>s(!t),children:l("img",{className:` ${t?"object-fit shadow-xl":"rounded-full"}`,style:t?{width:"90vmin",height:"90vmin"}:{},src:r,alt:e,onClick:()=>s(!t)})})}function K({state:r,onChange:e}){return r==d.BLANK?l("div",{className:"rounded overflow-hidden shadow outline outline-gray-600 w-12 h-12",children:d.NOT_BLANKS.map(t=>l("button",{className:`${t.color} text-white text-opacity-40 font-bold w-6 h-6`,title:t.label,onClick:()=>e(t),children:t.code},t.code))}):n("div",{className:"flex w-12",children:[l("div",{title:r.label,className:`${r.color} w-6 h-6 text-white text-opacity-40 font-bold rounded flex items-center justify-center`,children:r.code}),l("button",{title:"clear",className:"text-red-600 pl-1",onClick:()=>e(d.BLANK),children:"\xD7"})]})}const x=({showGroups:r,people:e,updatePerson:t})=>l(w,{children:e.map(s=>l("div",{className:"w-full px-2",children:n("div",{className:`w-full h-14 flex justify-between items-center mt-1 px-2 gap-1 rounded-md shadow overflow-hidden ${s.state!==d.BLANK?s.state.color:"bg-gray-100"} bg-opacity-70 transition-colors`,children:[n("span",{className:"flex-shrink overflow-clip",children:[s.first," ",l("span",{className:"font-bold",children:s.last})]}),n("div",{className:"flex flex-grow justify-end items-center",children:[r?l("i",{className:"text-xs text-right",children:s.group}):null,l(R,{src:s.profile,alt:s.name}),l("div",{className:"w-12 flex-none flex justify-center",children:l(K,{state:s.state,onChange:o=>{t(s,o)}})})]})]})},s.key))});x.Header=({showGroups:r})=>n("div",{className:"w-full flex flex-nowrap rounded bg-gray-500 shadow justify-center items-center px-4 gap-4 font-bold py-1 mb-2 text-sm text-center sticky top-0",children:[l("span",{className:"flex-grow text-left",children:"Name"}),n("div",{className:"float-right flex items-center",children:[r?l("span",{className:"",children:"Group"}):null,l("span",{className:"w-16",children:"Face"}),l("span",{className:"w-12",children:"Status"})]})]});function D(r){const e=r.map(s=>s.state).reduce((s,o)=>{var a;return s[a=o.code]||(s[a]=0),s[o.code]++,s},{}),t=Object.values(e).reduce((s,o)=>s+o,0);return d.ALL.map(s=>{const o=e[s.code]||0,a=100/t*o;return{count:o,percent:a,state:s}})}const y=({people:r})=>l("div",{className:"flex-none flex w-full rounded overflow-hidden",children:D(r).map(e=>l("span",{title:`${e.state.label}: ${e.percent}% (${e.count})`,className:`transition-all inline-block h-4 ${e.state.color}`,style:{width:e.percent+"%"}},`summary-${e.state.code}`))});function E(r,e,t){const s={},o=r.reduce((a,i)=>{const h=e(i);return a[h]||(a[h]=[]),a[h].push(i),a},s);return Object.keys(o).map(a=>({group:t(a),members:o[a]}))}function U({people:r,updatePerson:e}){const[t,s]=f.exports.useState("LOADING");f.exports.useEffect(()=>{const c=localStorage.getItem("view");c&&s(c)},[]),f.exports.useEffect(()=>{t!=="LOADING"&&localStorage.setItem("view",t)},[t]);const[o,a]=f.exports.useState(null),i=r.sort(m.BY_NAME),h=i.filter(c=>o===null||c.key.includes(o.toLowerCase().replace(/[^a-z]/g,""))),B=E(i,c=>c.state.code,d.fromChar),C=E(i,c=>c.group,c=>c);return n("div",{className:"w-full h-full m-0 p-0 pb-2 px-2 transition-none flex flex-col bg-gray-200",children:[n("div",{className:"rounded-b flex overflow-hidden items-center text-center mb-1 h-8 shadow-md border border-gray-600 border-t-0 uppercase text-sm font-bold text-gray-600 whitespace-nowrap",children:[l("span",{className:`transition-colors flex-grow py-2 px-2 ${t==="LIST"?"bg-gray-100":"bg-gray-300"}`,onClick:()=>s("LIST"),children:"List    "}),l("span",{className:`transition-colors flex-grow py-2 px-2 ${t==="BY_GROUP"?"bg-gray-100":"bg-gray-300"}`,onClick:()=>s("BY_GROUP"),children:"By Group"}),l("span",{className:`transition-colors flex-grow py-2 px-2 ${t==="BY_STATE"?"bg-gray-100":"bg-gray-300"}`,onClick:()=>s("BY_STATE"),children:"By State"}),l("span",{className:`transition-colors flex-grow py-2 px-2 ${t==="SEARCH"?"bg-gray-100":"bg-gray-300"}`,onClick:()=>s("SEARCH"),children:"Search  "})]}),t=="LIST"?n(w,{children:[l("span",{className:"font-bold",children:"Overall"}),l("div",{className:"pb-2",children:l(y,{people:i})}),l(x.Header,{showGroups:!0}),l("div",{className:"h-full overflow-y-scroll",children:l(x,{showGroups:!0,people:i,updatePerson:e})})]}):null,t==="BY_GROUP"?n(w,{children:[l("span",{className:"font-bold",children:"Overall"}),l(y,{people:i}),l("div",{className:"h-full w-full overflow-y-scroll",children:C.map(({group:c,members:g})=>n("div",{children:[n("div",{className:"sticky top-0 bg-gray-200 px-1 pb-2 pt-1 mt-3 border-t border-t-gray-300",children:[l("span",{className:"font-bold",children:c})," (",g.length,")",l(y,{people:g})]}),l(x,{showGroups:!1,people:g,updatePerson:e})]},c))})]}):null,t==="BY_STATE"?n(w,{children:[l("span",{className:"font-bold",children:"Overall"}),l(y,{people:i}),l("div",{className:"h-full w-full overflow-y-scroll",children:B.map(({group:c,members:g})=>n("div",{children:[n("div",{className:"sticky top-0 bg-gray-200 px-1 pb-2",children:[l("span",{className:"font-bold",children:c.label})," (",g.length,")"]}),l(x,{showGroups:!0,people:g,updatePerson:e})]},c.code))})]}):null,t==="SEARCH"?n(w,{children:[l("span",{className:"font-bold",children:"Overall"}),l("div",{className:"pb-2",children:l(y,{people:i})}),l("input",{className:"my-4 rounded px-2",type:"text",placeholder:"William Shakespeare",onChange:c=>a(c.target.value)}),n("span",{children:[l("span",{className:"font-bold",children:"Results"})," (",h.length,")"]}),l("div",{className:"h-full overflow-y-scroll",children:l(x,{showGroups:!0,people:h,updatePerson:e})})]}):null]})}function H({sidebar:r,content:e}){const[t,s]=f.exports.useState(!1);return n("div",{className:"w-full h-full",children:[l("div",{className:`fixed top-0 left-0 h-full transition border-r border-r-gray-600 shadow-lg z-[1] bg-gray-300 bg-opacity-75 backdrop-blur ${t?"w-4/5 min-w-fit":"w-16"}`,onClick:()=>s(!t),children:r(t)}),t?l("div",{className:"bg-transparent fixed w-full h-full",onClick:()=>s(!1)}):null,n("div",{className:"w-full h-full flex p-0 overflow-y-hidden",children:[l("div",{className:"flex-none h-full w-16"}),l("div",{className:"flex-grow h-full",style:{width:"calc(100vw - 4rem)"},children:e})]})]})}function Y({reset:r}){return n("span",{className:"flex overflow-hidden",children:[l("button",{className:"outline rounded p-1 px-2 my-1 ml-4 text-sm hover:text-white hover:bg-black active:text-white active:bg-neutral-600 transition-all",title:"Copy the results of this registation to clipboard (can be pasted into google sheets)",onClick:e=>{e.stopPropagation()},children:"Export"}),l("button",{className:"outline rounded p-1 px-2 my-1 ml-4 text-sm hover:text-white hover:bg-black active:text-white active:bg-neutral-600 transition-all",title:"Rename this registration",onClick:e=>{e.stopPropagation()},children:"Rename"}),l("button",{className:"outline rounded p-1 px-2 my-1 ml-4 text-sm text-amber-700 hover:text-white hover:bg-amber-700 active:text-white active:bg-amber-400 transition-all",title:"Reset this registration",onClick:e=>{e.stopPropagation(),r()},children:"Reset"}),l("button",{className:"outline rounded p-1 px-2 my-1 ml-4 text-sm text-red-600 hover:text-white hover:bg-red-600 active:text-white active:bg-red-300 transition-all",title:"Delete this registration (check you have exported the data)",onClick:e=>{e.stopPropagation()},children:"Delete"})]})}function M(){const[r,e,t]=G(),[s,o]=f.exports.useState("Population 1"),[a,i]=f.exports.useState("Mon 21 Mar");return l(H,{sidebar:h=>n("div",{className:"h-full w-full",children:[n("span",{className:"h-fit w-fit origin-top-left block  whitespace-nowrap text-2xl py-3 px-4 font-bold transition-transform ease-out",style:{transform:h?"":"rotate(-90deg) translateX(-100%)"},children:[s," - ",a]}),l("div",{className:`transition-all overflow-hidden h-full w-full ${h?"opacity-100":"opacity-0"}`,children:h?l(Y,{reset:t}):l(w,{})})]}),content:l(U,{people:r,updatePerson:e})})}I.render(l(j.StrictMode,{children:l(M,{})}),document.getElementById("root"));
